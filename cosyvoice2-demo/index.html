<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosyVoice2 for European Languages - Demo</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <img src="cosyvoice2-logo-clear.png" alt="CosyVoice2 Logo" class="header-logo">
                <!-- <h1 class="title">CosyVoice2 for European Languages</h1> -->
                <p class="subtitle">Advancing Generative TTS: Modular Adaptation and Benchmarking of CosyVoice2 for Expressive French and German Speech</p>
                <div class="paper-info">
                    <span class="conference">In Progress</span>
                    <a href="#" class="paper-link" target="_blank">
                        <i class="fas fa-flask"></i> Research in Progress
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <ul class="nav-links">
                <li><a href="#overview" class="nav-link active">Overview</a></li>
                <li><a href="#architecture" class="nav-link">Architecture</a></li>
                <li><a href="#interactive-demo" class="nav-link">Interactive Demo</a></li>
                <li><a href="#evaluation" class="nav-link">Evaluation Results</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Overview Section -->
            <section id="overview" class="section">
                <h2 class="section-title">Research Overview</h2>
                <div class="overview-grid">
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-globe-americas"></i>
                        </div>
                        <h3>Challenge</h3>
                        <p>How can we push generative TTS beyond English and Chinese, enabling expressive, paragraph-level synthesis in French and German? This project pioneers the modular adaptation of CosyVoice2, tackling the underexplored challenge of high-quality, cross-lingual voice and prosody cloning.</p>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h3>Methodology</h3>
                        <p>We introduce a rigorous, reproducible ablation gridâ€”fine-tuning key components of CosyVoice2 across data budgets and language regimes. Our backbone-agnostic refactor unlocks plug-and-play LLMs and efficient LoRA adaptation, setting a new standard for multilingual TTS research.</p>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3>Innovation</h3>
                        <p>This is the first open-source, component-level benchmarking of generative TTS for European languages. Our release empowers the community to transparently evaluate, extend, and deploy state-of-the-art cross-lingual voice cloning.</p>
                    </div>
                </div>
            </section>

            <!-- Architecture Section -->
            <section id="architecture" class="section">
                <h2 class="section-title">CosyVoice2 Architecture</h2>
                
                <div class="architecture-description">
                    <p class="architecture-intro">
                        CosyVoice2 follows a modular three-stage TTS pipeline. Each component can be fine-tuned independently 
                        or in combination to adapt the model to European languages. Click on the components below to explore their role 
                        and impact on the final speech quality.
                    </p>
                </div>

                <!-- Architecture Diagram -->
                <div class="architecture-diagram-container">
                    <svg class="architecture-svg" viewBox="0 0 1000 400" xmlns="http://www.w3.org/2000/svg">
                        <!-- Text Input -->
                        <rect class="input-box" x="50" y="50" width="120" height="60" rx="8"/>
                        <text x="110" y="75" text-anchor="middle" class="component-text">Input Text</text>
                        <text x="110" y="90" text-anchor="middle" class="component-subtext">FR/DE Text</text>
                        
                        <!-- Arrow 1 -->
                        <path class="arrow" d="M 180 80 L 220 80" marker-end="url(#arrowhead)"/>
                        
                        <!-- Text-Speech Language Model Component -->
                        <rect class="component-box slm-component" x="230" y="40" width="140" height="80" rx="12" data-component="slm"/>
                        <text x="300" y="65" text-anchor="middle" class="component-title">Text-Speech LM</text>
                        <text x="300" y="80" text-anchor="middle" class="component-subtitle">Text-Speech Language Model</text>
                        <text x="300" y="95" text-anchor="middle" class="component-detail">Text â†’ Semantic Tokens</text>
                        <circle class="finetune-indicator slm-indicator" cx="350" cy="50" r="8"/>
                        
                        <!-- Arrow 2 -->
                        <path class="arrow" d="M 380 80 L 420 80" marker-end="url(#arrowhead)"/>
                        
                        <!-- Flow Component -->
                        <rect class="component-box flow-component" x="430" y="40" width="140" height="80" rx="12" data-component="flow"/>
                        <text x="500" y="65" text-anchor="middle" class="component-title">Flow Matching</text>
                        <text x="500" y="80" text-anchor="middle" class="component-subtitle">Diffusion Model</text>
                        <text x="500" y="95" text-anchor="middle" class="component-detail">Semantic â†’ Mel Spectrogram</text>
                        <circle class="finetune-indicator flow-indicator" cx="550" cy="50" r="8"/>
                        
                        <!-- Arrow 3 -->
                        <path class="arrow" d="M 580 80 L 620 80" marker-end="url(#arrowhead)"/>
                        
                        <!-- HiFiGAN Component -->
                        <rect class="component-box hifigan-component" x="630" y="40" width="140" height="80" rx="12" data-component="hifigan"/>
                        <text x="700" y="65" text-anchor="middle" class="component-title">HiFi-GAN</text>
                        <text x="700" y="80" text-anchor="middle" class="component-subtitle">Vocoder</text>
                        <text x="700" y="95" text-anchor="middle" class="component-detail">Mel â†’ Waveform</text>
                        <circle class="finetune-indicator hifigan-indicator" cx="750" cy="50" r="8"/>
                        
                        <!-- Arrow 4 -->
                        <path class="arrow" d="M 780 80 L 820 80" marker-end="url(#arrowhead)"/>
                        
                        <!-- Output -->
                        <rect class="output-box" x="830" y="50" width="120" height="60" rx="8"/>
                        <text x="890" y="75" text-anchor="middle" class="component-text">Speech Output</text>
                        <text x="890" y="90" text-anchor="middle" class="component-subtext">ðŸ”Š Audio Output</text>
                        
                        <!-- Fine-tuning Legend -->
                        <g class="legend" transform="translate(50, 200)">
                            <text x="0" y="0" class="legend-title">Fine-tuning Status:</text>
                            <circle cx="20" cy="25" r="8" class="finetune-indicator inactive"/>
                            <text x="35" y="30" class="legend-text">Not Fine-tuned</text>
                            <circle cx="150" cy="25" r="8" class="finetune-indicator active"/>
                            <text x="165" y="30" class="legend-text">Fine-tuned</text>
                        </g>
                        
                        <!-- Arrow marker definition -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                    refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <!-- Component Information Panel -->
                <div class="component-info-panel">
                    <div class="info-content" id="info-content">
                        <h3>Select a Component</h3>
                        <p>Click on any component in the architecture diagram above to learn about its role and hear the impact of fine-tuning on European language speech quality.</p>
                    </div>
                </div>
            </section>

            <!-- Interactive Demo Section -->
            <section id="interactive-demo" class="section">
                <h2 class="section-title">Interactive Fine-tuning Demo</h2>
                
                <!-- Sample Text -->
                <div class="demo-text-section">
                    <h3>Sample Text</h3>
                    
                    <!-- Language Selector -->
                    <div class="language-selector">
                        <div class="language-switch">
                            <input type="radio" id="lang-french" name="language" value="fr" checked>
                            <label for="lang-french" class="language-option">
                                <span class="flag">ðŸ‡«ðŸ‡·</span>
                                <span class="lang-name">French</span>
                            </label>
                            <input type="radio" id="lang-german" name="language" value="de">
                            <label for="lang-german" class="language-option">
                                <span class="flag">ðŸ‡©ðŸ‡ª</span>
                                <span class="lang-name">German</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="text-sample" id="sample-text">
                        "Bonjour, je m'appelle Luka et je travaille dans une entreprise de technologie Ã  Paris.
                        Aujourd'hui, nous allons explorer les capacitÃ©s de synthÃ¨se vocale en franÃ§ais avec CosyVoice 2."
                    </div>
                                    <!-- Inline Prompt (subtle) -->
                                    <div class="prompt-inline">
                                        <div class="prompt-inline-card">
                                            <div class="prompt-inline-meta">
                                                <i class="fas fa-microphone" aria-hidden="true"></i>
                                                <span id="prompt-language-inline">French</span>
                                                <small class="prompt-inline-note">reference voice</small>
                                            </div>
                                            <audio controls class="audio-player prompt-player" id="prompt-audio-inline">
                                                <source src="common_voice_fr_40952142.wav" type="audio/wav" id="prompt-source">
                                                Your browser does not support the audio element.
                                            </audio>
                                        </div>
                                    </div>
                </div>

                <!-- Fine-tuning Controls -->
                <div class="finetuning-controls">
                    <h3>Fine-tuning Configuration</h3>
                    <div class="control-grid">
                        <div class="control-item">
                            <label class="control-label">
                                <input type="checkbox" id="slm-toggle" class="component-toggle" data-component="slm">
                                <span class="checkbox-custom"></span>
                                Text-Speech LM Fine-tuning
                            </label>
                            <p class="control-description">Improves semantic understanding and pronunciation patterns</p>
                        </div>
                        <div class="control-item">
                            <label class="control-label">
                                <input type="checkbox" id="flow-toggle" class="component-toggle" data-component="flow">
                                <span class="checkbox-custom"></span>
                                Flow Matching Fine-tuning
                            </label>
                            <p class="control-description">Enhances prosody and natural speech rhythm</p>
                        </div>
                        <div class="control-item">
                            <label class="control-label">
                                <input type="checkbox" id="hifigan-toggle" class="component-toggle" data-component="hifigan">
                                <span class="checkbox-custom"></span>
                                HiFi-GAN Fine-tuning*
                            </label>
                            <p class="control-description">Improves audio quality and reduces artifacts</p>
                        </div>
                    </div>
                </div>

                <!-- prompt section moved above (inline with sample text) -->

                <!-- Audio Comparison Grid -->
                <div class="audio-grid">
                    <div class="audio-card baseline-card">
                        <h4><i class="fas fa-play-circle"></i> Baseline (No Fine-tuning)</h4>
                        <div class="quality-indicators">
                            <span class="quality-badge poor">Strong English Accent</span>
                            <span class="quality-badge poor">Unnatural Prosody</span>
                        </div>
                        <audio controls class="audio-player" data-config="baseline">
                            <source src="audio/original-fr.wav" type="audio/wav">
                            Your browser does not support the audio element.
                        </audio>
                        <p class="audio-description">Original CosyVoice2 model without any language-specific training.</p>
                    </div>

                    <div class="audio-card dynamic-card" id="dynamic-audio-card">
                        <h4 id="dynamic-title"><i class="fas fa-magic"></i> Current Configuration</h4>
                        <div class="quality-indicators" id="dynamic-indicators">
                            <span class="quality-badge neutral">Select components to hear improvements</span>
                        </div>
                        <audio controls class="audio-player" id="dynamic-audio" data-config="dynamic">
                            <source src="audio/original-fr.wav" type="audio/wav" id="dynamic-source">
                            Your browser does not support the audio element.
                        </audio>
                        <p class="audio-description" id="dynamic-description">
                            Select fine-tuning components above to hear the progressive improvements in speech quality.
                        </p>
                    </div>
                </div>

                <!-- Research Notes -->
                <div class="research-notes">
                    <div class="footnote">
                        <span class="footnote-marker">*</span>
                        <span class="footnote-text">
                            <strong>Note on HiFi-GAN Training:</strong> The "original" HiFi-GAN here uses a partially trained vocoder, while "fine-tuned" represents the official CosyVoice2 HiFi-GAN model. 
                            This showcases the effect of proper vocoder training, as typically 
                            <a href="https://github.com/FunAudioLLM/CosyVoice/issues/1349#issuecomment-2942786544" target="_blank" class="inline-link">no additional HiFi-GAN training is needed</a> 
                            for cross-lingual adaptation.
                        </span>
                    </div>
                </div>
            </section>

            <!-- Evaluation Results Section -->
            <section id="evaluation" class="section">
                <h2 class="section-title">Evaluation Results</h2>
                
                <!-- Results Overview -->
                <div class="results-overview">
                    <p class="results-intro">
                        Comprehensive evaluation across multiple metrics demonstrates the effectiveness of our component-wise fine-tuning approach for both French and German. 
                        Results show progressive improvements as more components are fine-tuned for European language adaptation.
                    </p>
                </div>

                <!-- Language and Metric Selectors -->
                <div style="display: flex; justify-content: center; gap: 40px; margin-bottom: 30px; flex-wrap: wrap;">
                    <!-- Language Selector for Evaluation -->
                    <div style="display: flex; align-items: center;">
                        <label for="eval-language-select" style="font-weight:600; font-size:1.1em; margin-right:10px;">Language:</label>
                        <select id="eval-language-select" style="font-size:1em; padding:6px 16px; border-radius:8px; border:1px solid #e2e8f0;">
                            <option value="fr">ðŸ‡«ðŸ‡· French</option>
                            <option value="de">ðŸ‡©ðŸ‡ª German</option>
                        </select>
                    </div>
                    
                    <!-- Metric Selector -->
                    <div style="display: flex; align-items: center;">
                        <label for="metric-select" style="font-weight:600; font-size:1.1em; margin-right:10px;">Metric:</label>
                        <select id="metric-select" style="font-size:1em; padding:6px 16px; border-radius:8px; border:1px solid #e2e8f0;">
                            <option value="wer_norm" selected>Word Error Rate (normalized)</option>
                            <option value="secs">Speaker Similarity</option>
                            <option value="mcd">Mel Cepstral Distortion (MCD)</option>
                            <option value="f0_corr">F0 Correlation</option>
                            <option value="vuv">Voiced/Unvoiced Error (V/UV)</option>
                        </select>
                    </div>
                </div>

                <!-- Metrics Grid -->

                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Component Comparison</h3>
                        <div class="chart-container large">
                            <canvas id="radar-chart" width="520" height="380"></canvas>
                            <button class="fullscreen-btn" data-chart="radar-chart">â›¶</button>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h3>Learning Curve</h3>
                        <div class="chart-container">
                            <canvas id="learning-curve-chart" width="400" height="300"></canvas>
                            <button class="fullscreen-btn" data-chart="learning-curve-chart">â›¶</button>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h3>Mix vs Mono Training (across hours)</h3>
                        <div class="chart-container">
                            <canvas id="mix-mono-curve-chart" width="400" height="300"></canvas>
                            <button class="fullscreen-btn" data-chart="mix-mono-curve-chart">â›¶</button>
                        </div>
                    </div>
                </div>

                <!-- Baseline vs Best Model Full Width -->
                <div class="baseline-fullwidth">
                    <h3>Baseline vs Best Model (anchored by min WER_norm)</h3>
                    <div class="chart-container large">
                        <canvas id="baseline-chart" width="800" height="400"></canvas>
                        <button class="fullscreen-btn" data-chart="baseline-chart">â›¶</button>
                    </div>
                </div>

                <!-- Key Findings -->
                <div class="key-findings">
                    <h3>Key Findings</h3>
                    <div class="findings-grid">
                        <div class="finding-item">
                            <div class="finding-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <h4>Most Impactful Component</h4>
                            <p>The text-speech language model is the key driver of quality, capturing linguistic rhythm and phrasing essential for intelligibility and natural prosody. Flow fine-tuning further improves continuity and expressiveness, while the vocoder is robust and rarely a bottleneck for cross-lingual adaptation.</p>
                        </div>
                        <div class="finding-item">
                            <div class="finding-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <h4>Data Scaling & Efficiency</h4>
                            <p>Most performance gains are achieved with 100â€“500 hours of training data per language, following a Pareto-like pattern: intelligibility plateaus early in our limited data setting and would require a significantly larger dataset to improve, but prosody and speaker similarity continue to improve with more data in our setting. This enables strong results even for low-resource languages.</p>
                        </div>
                        <div class="finding-item">
                            <div class="finding-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <h4>Component Synergy & Practical Recipe</h4>
                            <p>Fine-tune the LM for immediate gains; add flow adaptation for enhanced prosody if resources allow. Vocoder and tokenizer can remain frozen. This modular strategy streamlines adaptation for new languages and domains.</p>
                        </div>
                        <div class="finding-item">
                            <div class="finding-icon">
                                <i class="fas fa-exchange-alt"></i>
                            </div>
                            <h4>Cross-lingual Training Effects</h4>
                            <p>Bilingual training consistently boosts speaker similarity (SECS) across budgets, with mixed effects on intelligibility (WER). Multilingual adaptation is most beneficial at very low and very high data scales.</p>
                        </div>
                        <div class="finding-item">
                            <div class="finding-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <h4>Limitations & Future Directions</h4>
                            <p>Current results are limited by the frozen speech tokenizer. Future work should explore tokenizer adaptation and backbone swapping to further advance cross-lingual TTS.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-main">
                    <p class="authors">
                        <strong>Researchers:</strong> 
                        <a href="https://horstmann.tech/" class="author-highlight">Tim Luka Horstmann</a>, 
                        <a href="#" class="author-highlight">Collaborator Name</a>,
                        <a href="https://en.wikipedia.org/wiki/%C3%89ric_Moulines" class="author-highlight">Eric Moulines</a>
                    </p>
                    <p class="affiliations">
                        Ã‰cole Polytechnique, Hi! PARIS Research Center
                    </p>
                    <p class="copyright">&copy; 2025 Research in Progress.</p>
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">
                        <i class="fab fa-github"></i> GitHub (Coming Soon)
                    </a>
                    <a href="mailto:tim.horstmann@ip-paris.fr" class="footer-link">
                        <i class="fas fa-envelope"></i> Contact
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
